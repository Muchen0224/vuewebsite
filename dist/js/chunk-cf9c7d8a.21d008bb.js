(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf9c7d8a"],{1799:function(t,a,i){"use strict";var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("nav",{attrs:{"aria-label":"Page navigation example"}},[i("ul",{staticClass:"pagination justify-content-center"},[i("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_pre}},[i("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.changePage(t.pagination.current_page-1)}}},[i("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pagination.total_pages,(function(a){return i("li",{key:a,staticClass:"page-item",class:{active:t.pagination.current_page==a}},[i("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),t.changePage(a)}}},[t._v(t._s(a))])])})),i("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_next}},[i("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.changePage(t.pagination.current_page+1)}}},[i("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])])},s=[],n={props:["pagination"],methods:{changePage:function(t){this.$emit("turnPage",t)}}},r=n,c=i("2877"),o=Object(c["a"])(r,e,s,!1,null,null,null);a["a"]=o.exports},"791c":function(t,a,i){},"8f16":function(t,a,i){"use strict";i.r(a);var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),i("div",{attrs:{id:"content"}},[i("div",{staticClass:"route"},[i("div",{staticClass:"container"},[i("router-link",{attrs:{to:"/"}},[t._v("首頁")]),i("span",{staticClass:"routeDivider"},[t._v("/")]),i("span",{staticClass:"current"},[t._v("商品列表")])],1)]),i("div",{staticClass:"classification d-block d-lg-none mt-4"},[i("div",{staticClass:"container"},[i("div",{staticClass:"border"},[i("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapseProductClass","aria-expanded":"false","aria-controls":"collapseExample"}},[t._v(" 分類 ")]),i("div",{staticClass:"collapse",attrs:{id:"collapseProductClass"}},[i("div",{staticClass:"card card-body border-0"},[i("ul",{staticClass:"all"},[i("li",[i("a",{attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.filter="顯示所有商品"}}},[t._v("顯示所有商品")])])]),i("ul",[i("li",[i("a",{staticClass:"d-flex",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.filter="貓食"}}},[i("span",[t._v("貓食")]),i("span",{staticClass:"ml-auto"},[t._v("3")])])]),i("li",[i("a",{staticClass:"d-flex",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.filter="貓抓板"}}},[i("span",[t._v("貓抓板")]),i("span",{staticClass:"ml-auto"},[t._v("3")])])]),i("li",[i("a",{staticClass:"d-flex",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.filter="寵物周邊"}}},[i("span",[t._v("寵物周邊")]),i("span",{staticClass:"ml-auto"},[t._v("3")])])])])])])])])]),i("div",{staticClass:"row"},[i("div",{staticClass:"d-none d-lg-block col-lg-3"},[i("div",{staticClass:"border side-category"},[i("div",{staticClass:"title"},[t._v("分類")]),i("ul",[i("li",[i("a",{attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.filter="顯示所有商品"}}},[t._v("顯示所有商品")])])]),i("ul",[i("li",[i("a",{staticClass:"d-flex",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.filter="貓食"}}},[i("span",[t._v("貓食")]),i("span",{staticClass:"ml-auto"},[t._v("3")])])]),i("li",[i("a",{staticClass:"d-flex",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.filter="貓抓板"}}},[i("span",[t._v("貓抓板")]),i("span",{staticClass:"ml-auto"},[t._v("3")])])]),i("li",[i("a",{staticClass:"d-flex",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.filter="寵物周邊"}}},[i("span",[t._v("寵物周邊")]),i("span",{staticClass:"ml-auto"},[t._v("3")])])])])])]),i("div",{staticClass:"col-12 col-lg-9"},[i("div",{staticClass:"product-list"},[i("div",{staticClass:"container"},[i("div",{staticClass:"filter-text mt-4"},[t._v("分類: "+t._s(t.filter))]),i("div",{staticClass:"row mt-4"},t._l(t.filterData,(function(a,e){return i("div",{key:e,staticClass:"col-12 col-lg-6 col-xl-4 mb-4"},[i("div",{staticClass:"card border-0 shadow-sm"},[i("router-link",{staticClass:"d-block",attrs:{to:{name:"ShopItem",params:{id:a.id}}}},[i("div",{staticStyle:{height:"150px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+a.imageUrl+")"}})]),i("div",{staticClass:"card-body"},[i("span",{staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(a.category))]),i("h5",{staticClass:"card-title"},[i("router-link",{staticClass:"text-dark",attrs:{to:{name:"ShopItem",params:{id:a.id}}}},[t._v(" "+t._s(a.title)+" ")])],1),i("p",{staticClass:"card-text"},[t._v(t._s(a.description))]),i("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[a.price?t._e():i("div",{staticClass:"h5"},[t._v("售價"+t._s(a.origin_price))]),a.price?i("div",{staticClass:"h6 line-through"},[t._v("原價"+t._s(a.origin_price))]):t._e(),a.price?i("div",{staticClass:"h5"},[t._v("售價"+t._s(a.price))]):t._e()])]),i("div",{staticClass:"card-footer d-flex"},[i("router-link",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{to:{name:"ShopItem",params:{id:a.id}}}},[i("i",{staticClass:"fas fa-info-circle"},[t._v("查看更多")])]),i("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(i){return t.addToCart(a.id)}}},[t.status.loadingItem?t._e():i("i",{staticClass:"fas fa-shopping-cart"}),t.status.loadingItem===a.id?i("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" 加到購物車 ")])],1),i("div",{staticClass:"like",on:{click:function(i){return i.preventDefault(),t.changeWish(a)}}},[i("div",{staticClass:"row justify-content-center align-items-center"},[-1==t.wishId.indexOf(a.id)?i("i",{staticClass:"far fa-heart"}):i("i",{staticClass:"fas fa-heart"})])])],1)])})),0)])]),i("Pagination",{attrs:{pagination:t.pagination},on:{turnPage:t.getProducts}})],1)])])],1)},s=[],n=(i("99af"),i("4de4"),i("c740"),i("4160"),i("d81d"),i("a434"),i("159b"),i("1157"),i("1799")),r={components:{Pagination:n["a"]},data:function(){return{sideMenu:!1,products:[],cart:[],pagination:{},isLoading:!1,status:{loadingItem:""},wishId:JSON.parse(localStorage.getItem("wishId"))||[],wished:JSON.parse(localStorage.getItem("wished"))||[],likeClass:{far:!0,fas:!1},filter:"顯示所有商品",cartLength:"",coupon_code:""}},methods:{getProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("muchen","/products?page=").concat(t),i=this;i.isLoading=!0,this.$http.get(a).then((function(t){console.log("getProducts",t.data),i.isLoading=!1,i.products=t.data.products,i.pagination=t.data.pagination}))},addToCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("muchen","/cart");i.status.loadingItem=t;var s={product_id:t,qty:a};this.$http.post(e,{data:s}).then((function(t){console.log("addToCart",t),i.getCartLength(),i.status.loadingItem=""}))},getCartLength:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("muchen","/cart");t.isLoading=!0,this.$http.get(a).then((function(a){t.cartLength=a.data.data.carts.length,t.$bus.$emit("updateCartNum",t.cartLength),t.isLoading=!1}))},changeWish:function(t){var a=this;a.wishId=a.wished.map((function(t){return t.id}));var i=a.wishId.findIndex((function(a){return t.id===a}));console.log(i),-1==i?(a.wished.push(t),a.wishId.push(t.id)):(a.wished.splice(i,1),a.wishId.splice(i,1)),console.log(a.wished),a.wished.forEach((function(t){t.num=1})),localStorage.setItem("wished",JSON.stringify(a.wished)),localStorage.setItem("wishId",JSON.stringify(a.wishId))},sendWishList:function(){var t=this;t.$bus.$emit("updateWishList",t.wished,t.wishId)}},computed:{filterData:function(){var t=this;return""==t.filter||"顯示所有商品"==t.filter?t.products:t.products.filter((function(a){return t.filter==a.category}))}},created:function(){var t=this;t.$bus.$on("changeFilter",(function(a){console.log("here",a),t.filter=a})),this.getProducts(),this.getCartLength()},mounted:function(){window.scrollTo(0,0)},beforeDestroy:function(){this.sendWishList()},destroyed:function(){var t=this;t.$bus.$off("changeFilter")}},c=r,o=(i("b370"),i("2877")),l=Object(o["a"])(c,e,s,!1,null,"87c53b58",null);a["default"]=l.exports},"99af":function(t,a,i){"use strict";var e=i("23e7"),s=i("d039"),n=i("e8b5"),r=i("861d"),c=i("7b0b"),o=i("50c4"),l=i("8418"),d=i("65f0"),u=i("1dde"),f=i("b622"),p=i("2d00"),h=f("isConcatSpreadable"),g=9007199254740991,v="Maximum allowed index exceeded",C=p>=51||!s((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),m=u("concat"),_=function(t){if(!r(t))return!1;var a=t[h];return void 0!==a?!!a:n(t)},b=!C||!m;e({target:"Array",proto:!0,forced:b},{concat:function(t){var a,i,e,s,n,r=c(this),u=d(r,0),f=0;for(a=-1,e=arguments.length;a<e;a++)if(n=-1===a?r:arguments[a],_(n)){if(s=o(n.length),f+s>g)throw TypeError(v);for(i=0;i<s;i++,f++)i in n&&l(u,f,n[i])}else{if(f>=g)throw TypeError(v);l(u,f++,n)}return u.length=f,u}})},a434:function(t,a,i){"use strict";var e=i("23e7"),s=i("23cb"),n=i("a691"),r=i("50c4"),c=i("7b0b"),o=i("65f0"),l=i("8418"),d=i("1dde"),u=i("ae40"),f=d("splice"),p=u("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,g=Math.min,v=9007199254740991,C="Maximum allowed length exceeded";e({target:"Array",proto:!0,forced:!f||!p},{splice:function(t,a){var i,e,d,u,f,p,m=c(this),_=r(m.length),b=s(t,_),w=arguments.length;if(0===w?i=e=0:1===w?(i=0,e=_-b):(i=w-2,e=g(h(n(a),0),_-b)),_+i-e>v)throw TypeError(C);for(d=o(m,e),u=0;u<e;u++)f=b+u,f in m&&l(d,u,m[f]);if(d.length=e,i<e){for(u=b;u<_-e;u++)f=u+e,p=u+i,f in m?m[p]=m[f]:delete m[p];for(u=_;u>_-e+i;u--)delete m[u-1]}else if(i>e)for(u=_-e;u>b;u--)f=u+e-1,p=u+i-1,f in m?m[p]=m[f]:delete m[p];for(u=0;u<i;u++)m[u+b]=arguments[u+2];return m.length=_-e+i,d}})},b370:function(t,a,i){"use strict";var e=i("791c"),s=i.n(e);s.a},c740:function(t,a,i){"use strict";var e=i("23e7"),s=i("b727").findIndex,n=i("44d2"),r=i("ae40"),c="findIndex",o=!0,l=r(c);c in[]&&Array(1)[c]((function(){o=!1})),e({target:"Array",proto:!0,forced:o||!l},{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n(c)},d81d:function(t,a,i){"use strict";var e=i("23e7"),s=i("b727").map,n=i("1dde"),r=i("ae40"),c=n("map"),o=r("map");e({target:"Array",proto:!0,forced:!c||!o},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-cf9c7d8a.21d008bb.js.map